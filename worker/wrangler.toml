name = "jnu-events-worker"
main = "src/index.ts"
compatibility_date = "2025-01-01"

# 배포 후, 이 Worker를 예: https://api.example.com 으로 라우팅하거나 Pages와 same-origin으로 연결하세요.
# routes = [{ pattern = "your-domain.com/api/*", zone_name = "your-domain.com" }]

[triggers]
crons = ["0 18 * * *"] # 매일 03:00 KST (UTC+9 → 18:00 UTC)

[[d1_databases]]
binding = "DB"
database_name = "jnu_events"
database_id = "0e6a6969-19be-44a7-b510-e8952a49f6b4"

[vars]
CRAWL_TIMEOUT_MS = "12000"
USER_AGENT = "Mozilla/5.0 (compatible; JNUEventsBot/1.0; +https://github.com/your-repo)"

# ⚠️  ADMIN_TOKEN은 평문으로 여기에 넣지 말고, 아래 명령어로 시크릿을 등록하세요:
#     npx wrangler secret put ADMIN_TOKEN
# 로컬 개발 시에는 worker/.dev.vars 파일에 ADMIN_TOKEN=your_secret 을 설정하세요.
